@section Scripts{
    <partial name="_ValidationScriptsPartial"/>}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/4.0.0/jquery.validate.unobtrusive.min.js" integrity="sha512-xq+Vm8jC94ynOikewaQXMEkJIOBp7iArs3IhFWSWdRT3Pq8wFz46p+ZDFAR7kHnSFf+zUv52B3prRYnbDRdgog==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    @using DataAccess.ViewModel
@model AdminDashboard
<style>
    .required {
        color: red;
    }

    .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        left: -10000px;
        overflow: hidden;
    }
</style>
<div class="modal-header bg-info">
    <h5 class="modal-title text-white" id="exampleModalLabel"> Transfer Request  </h5>
    <button type="button" class="btn-close text-white" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body m-auto">
    <div class="mb-3 text-secondary">
        To transfer this request, search and select  another Physician.
    </div>
    <form method="post" id="submittransfer"  action='@Url.Action("TransferReq", "Admin",new {requestid=Model.requestid})'>
        <div class="dropdown my-3  ">
            <select class="form-select" id="regionName" aria-label="Floating label select example">
                @if (Model.Regions != null)
                {
                    <option id="regionName" value="" disabled selected style="display:none">Narrow Down Region Name<span class="required" style="color:red">*</span></option>
                    
                    @foreach (var item in Model.Regions)
                    {
                        <option id="regionName" value="@item.Regionid">@item.Name</option>
                        
                       
                    }
                  
                }   
            </select>
            <div class="text-danger" id="regionNameError">
              
            </div>
        </div>
        <div class="dropdown my-3  ">
            <select class="form-select" id="Physician" asp-for="@Model.transferreq.physicianname" aria-label="Floating label select example" required ><span class="required">*</span>
               

                <option disabled selected style="display:none">Select Physician <span class="required">*</span></option>

            </select>
            @Html.ValidationMessageFor(Model=>Model.transferreq.physicianname,"",new{@class="text-danger"})
        </div>

        <div class="form-floating my-4">
            <textarea class="form-control" asp-for="transferreq.Description" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px"></textarea>
            
            <label for="floatingTextarea2" class="text-secondary" id="label-floating">Description </label>
            @Html.ValidationMessageFor(Model=>Model.transferreq.Description,"",new{@class="text-danger"})
           
        </div>
        <div class="d-flex justify-content-end">
            <button type="submit"  class="btn-back btn btn-outline-info btn-lg p-2 px-4 me-3 info-button me-2 ">Submit</button>
            <button type="button" class="btn-back btn btn-outline-info btn-lg p-2 px-4 button-info" data-bs-dismiss="modal" id="cancel">Cancel</button>
        </div>
        <p aria-hidden="true" id="required-description">
            <span class="required">*</span>Required field
        </p>
    </form>
</div>
<script>
    $(document).on('change', '#regionName', function () {
        var selectedvalue = $(this).val();

        $.ajax({
            url: '@Url.Action("GetDropDown", "Admin")',
            type: 'POST',
            data: { selectedvalue: selectedvalue },
            success: function (data) {
                //var secondDropdown = '<select id="secondDropdown">';
                //$.each(data, function (index, item) {
                //    secondDropdown += '<option>' + item + '</option>';
                //});
                //secondDropdown += '<option disabled selected style="display:none">Select Physician</option></select>';
                //$('#secondDropdownContainer').html(secondDropdown);
                console.log("AJAX success");
                var physician = '';
                $.each(data, function (index, physicians) {

                    physician += '<option>' + physicians + '<option>'

                    //    $("#Physician").append('<option value="' + Physician + '">' + Physician + '</option>');
                });

                $('#Physician').html(physician);

            },
            error: function () {
                console.error('Error fetching partial view.');
            }
        });


    });

    $(document).ready(function () {
        console.log("dewWE");
        $('#submittransfer ').submit(function (event) {
            console.log("hdjks")
            var selectedValue = $('#regionName').val();
            console.log("region");
            if (selectedValue === '') {
                console.log("hrejej");
                $('#regionNameError').html('Please select a region.');
                event.preventDefault(); // Prevent form submission
            }
        });
    });
    $(document).ready(function () {
        console.log("dewWE");
        $('#submittransfer ').submit(function (event) {
            console.log("hdjks")
            var selectedValue = $('#regionName').val();
            console.log(selectedValue)
            console.log("region");
            if (selectedValue === '') {
                console.log("hrejej");
                $('#regionNameError').html('Please select a region.');
                event.preventDefault(); // Prevent form submission
            }
        });
    });
</script>

