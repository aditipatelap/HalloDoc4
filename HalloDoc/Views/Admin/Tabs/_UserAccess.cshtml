@using DataAccess.ViewModel;
@model AdminDashboard
<link rel="stylesheet" href="~/css/AdminSite.css" asp-append-version="true" />
<div class="container mt-2">
    <div class="justify-content-between d-flex container-fluid mb-2 position-relative ">
        <div class="">
            <h3> User Access</h3>
        </div>
      
    </div>
    <div class="d-flex justify-content-between border-0 shadow p-4 mb-5 rounded">
        <div>

            <select id="adminaccountfilter" class="form-select form-control ms-3 " aria-label="Default select example">
                <option value="0">All</option>
                <option value="1">Admin</option>
                <option value="2">Provider</option>
                <option value="3">Patient</option>
                

            </select>
        </div>
       
    </div>
    <div class="w-100 my-3"></div>
    <table class="table table-hover table-responsive" style="height:75px; text-align:match-parent">
        <thead>
            <tr class="table-secondary">
                <td>Account type</td>
                <td>Accpount Poc</td>
                <td>Phone</td>
                <td>Status</td>
                <td>Open Requests</td>
                <td>Actions</td>
            </tr>
        </thead>
        <tbody>
            @if (Model != null)
            {
                @foreach (var items in Model.userAccessModels)
                {
                    <tr>
                        

                        <td>
                            @items.AccountType
                        </td>
                        <td>
                            @items.AccountPOC
                        </td>
                        <td>
                            @items.PhoneNumber
                        </td>
                        <td>
                            @items.status
                        </td>
                        <td>
                           
                        </td>
                        <td>
                           
                            <button class="btn btn-outline-info openEditAccess" data-userid="" data-accountypeid="@items.accounttypeid" data-aspnetuserid="@items.aspnetuserid">Edit</button>
                        </td>
                    </tr>

                }
            }


        </tbody>
    </table>
</div>
<script>
    $('.openEditAccess').click(function ()
    {
        var accounttypeid = $(this).data('accountypeid');
        var aspnetuserid=$(this).data('aspnetuserid');
        console.log(accounttypeid);
        $.ajax({
            url: "/Admin/OpenEditAccess",
            method: "POST",
            data: { accounttypeid: accounttypeid, aspnetuserid: aspnetuserid },
            success: function (result) {
                $("#TabContent").html(result);
                // $('#accounttype').val(0);
                // $('#rolename').val('');
                // $('.check_menu:checked').prop('checked', false);
                // form.classlist.remove('was-validated');
               
            },
            error: function () {
                toastr.error("Error while fetching data");
            }
        });

    });
    
</script>

