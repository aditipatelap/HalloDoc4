@using DataAccess.ViewModel;
@model AdminDashboard<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" /><script src="https://unpkg.com/leaflet/dist/leaflet.js"></script><link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" /><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" /><script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script><div class="container-fluid bg-body-tertiary vh-100">    <div class="container d-flex flex-column mt-3 gap-2 p-3 ">        <div class="container d-flex justify-content-between p-0 my-2">            <div>                <p class="h4">Provider Location </p>            </div>            <div class="col d-flex justify-content-end">                <button type="button" class="btn btn-outline-info"><i class="fa-solid fa-angle-left"></i>Back</button>            </div>        </div>        <div id="map" style=" height: 600px;"></div>    </div></div><script>    var map = L.map('map').setView([38.8610, 71.2761], 4); // Set initial center and zoom level    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'    }).addTo(map);    var physicians = [    @foreach (var physician in Model.physicianlocations)
    {        <text>{                "Id": "@physician.Physicianid",                "Name": "@physician.Physicianname",                "Address": "@physician.Address"            }, </text>    }        ]    /*  var iconColors = ['#FF5733', '#3399FF', '#33FF57', '#FF33F2', '#FFC300'];*/ // Array of different marker colors    var iconCounter = 0;    physicians.forEach(function (physician) {        var id = physician.Id;        var address = physician.Address;        var name = physician.Name;        fetch('https://nominatim.openstreetmap.org/search?format=json&q=' + address)            .then(response => response.json())            .then(data => {                if (data.length > 0) {                    var lat = parseFloat(data[0].lat);                    var lon = parseFloat(data[0].lon);                    // Create marker with offset to prevent overlapping                    var marker = L.marker([lat + (0.0003 * iconCounter), lon]).addTo(map);                    marker.bindPopup(name); // Bind physician's name to the marker                    // Increment counter for next marker color                    iconCounter = (iconCounter + 1);                }            });    });</script>