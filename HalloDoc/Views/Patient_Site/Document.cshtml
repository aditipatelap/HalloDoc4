@model List<DataAccess.ViewModel.Documentmodel>
    @await Html.PartialAsync("_Dashboardheader")
<hr>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<div class="tab d-flex  shadow mt-1 ms-1 ">
    <p class="tab-links active-link" onclick="opentab('Dashboard')">Dashboard</p>
    <p class="tab-links" onclick="opentab('Profile')">Profile</p>

</div>
<div id="Dashboard" class="tab-contents active-tab">
   <div class="d-flex justify-content-between mt-5 container">
    <h4 class="mb-5">Documents</h4>



</div>  



    </div>
    <div class="container bg-white shadow">
    <div class="d-flex justify-content-end">
        <button type="button" class="btn btn-outline-info" onclick="location.href='@Url.Action("patientDashboard", "Patient_site")'">
            <i class="bi bi-chevron-left"></i>Back
        </button>
    </div>
        <p class="mb-2">Patient</p>
        <h3 class="text-info">User name Id</h3>
        <div class="mb-3">Check here for any files that you or the doctros of your subsequents requestor have attached for your to review. </div>
        <div class="d-flex">
        <div class="file-name input-group-text border-top border-bottom -border-start border-rounded  col-lg-11 col-sm-10 col-xs-7 col-8" id="file-name">Select File</div>
        <div class="file-upload-container col-lg-1 col-sm-2 mx-0 col-xs-5 col-4 px-0">
            <label for="formFile" class="input-group-text bg-primary text-white">
                <i class="bi bi-cloud-arrow-up "></i>&nbsp;Upload
            </label>
            <input class="d-none" type="file" id="formFile" name="file">
        </div>
            </div>
<div class="d-flex justify-content-between mt-5">
 
    <h4 class="mt-4">Documents</h4>

            
                <button type="button" class="btn btn-outline-info" onclick="DownloadAll()">Download All</button>
            

         </div>   
            <div class="table-responsive">
                <table class="table table-responsive mt-3 p-3">
                    <thead>
                        <tr>

                            <th scope="col">
                            <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="headerCheckbox">

                            </div>
                            </th>
                            <th scope="col">Uploader</th>
                             <th scope="col">Upload Date <i class="fa fa-arrow-up"></i></th>
                            <th scope="col">Actions</th>

                        </tr>
                    </thead>
                    <tbody>


                        @if (Model != null)
                    {
                        @foreach (var items in Model)
                        {

                            <tr>
                                <td>
                                <div class="form-check">
                                    <input class="form-check-input checkbox" type="checkbox" value="" id="flexCheckDefault">

                                </div>
                                </td>

                                <td>@items.uploaddate</td>
                                <td>@items.uploader</td>
                           @* <td><button type="button" class="btn px-2 py-1 btn-outline shadow-none night-mode-btn "><a href="~/File/@items.uploaddate" class="text-decoration-none " download />Download</button></td>
                        </tr>*@
                               <td><button class="btn btn-outline-info" ><a href="~/Files/@items.uploader"download/>  <i class="fa fa-cloud-arrow-up "></i></button>

                            </tr>
                        }
                    }
                </tbody>

                </table>
            </div>
        </div>
      </div>
    
      <script>
    document.getElementById('formFile').addEventListener('change', function () {
        var fileName = this.files[0].name;
        document.getElementById('file-name').textContent = fileName;
    });

    document.addEventListener('DOMContentLoaded', function () {
        const headerCheckbox = document.getElementById('headerCheckbox');
        const checkboxes = document.querySelectorAll('.checkbox');

        headerCheckbox.addEventListener('change', function () {
            checkboxes.forEach(function (checkbox) {
                checkbox.checked = headerCheckbox.checked;
            });
        });

        checkboxes.forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                // If any checkbox is unchecked, uncheck the header checkbox
                if (!this.checked) {
                    headerCheckbox.checked = false;
                }
            });
        });
    });
   


    function DownloadAll() {
        var allcheckbox = document.getElementsByClassName('doc-checkbox');
        var alllinks = document.getElementsByClassName('download-link');

        for (var i = 0; i < allcheckbox.length; i++) {
            if (allcheckbox[i].checked) {
                console.log(alllinks[i]);
                alllinks[i].click();
            }
        }
    }
      </script>
