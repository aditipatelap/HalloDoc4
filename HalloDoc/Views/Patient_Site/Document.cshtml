<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css"><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>@{    ViewData["Title"] = "patientDashboard";}@{    int count = 0;}@await Html.PartialAsync("_Dashboardheader")@using DataAccess.ViewModel@model Dashboardpage;@inject IHttpContextAccessor _httpContextAccessor;<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />@*@model DataAccess.ViewModel.patientDashInfo*@<div class="tab d-flex  shadow mt-1 ms-1  ">    <p class="tab-links active-link" onclick="opentab('Dashboard')">Dashboard</p>    <p class="tab-links" onclick="opentab('Profile')">Profile</p></div><div class="tab-contents active-tab container" id="Dashboard">            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">            <div class="container pb-5">                <div class="margin-viewdoc">                    <div class="container mt-3 d-flex justify-content-between" id="back">                        <div class="text-black"><h4 class="text-black">Submit Information</h4></div>                        <div></div>                        <button class="btn btn-outline-info btn-large" onclick="location.href='@Url.Action("patientDashboard", "Patient_site")'">                            <i class="bi bi-chevron-left"></i>Back                        </button>                    </div>                    <div class="bglight rounded p-3 shadow mt-3" id="content">                        <span class="text-secondary">Patient Name</span>                        <div class="mt-1">                            <div class="d-flex">                                <h4 style="color:deepskyblue">                                    @_httpContextAccessor.HttpContext.Session.GetString("PatientName") <h6 class="text-dark mt-2">@Model.confirmation</h6>                                </h4>                            </div>                            @*(@Model.requests.FirstOrDefault(x => x.Requestid == (Model.requests.FirstOrDefault(m =>m.Userid == Model.user.Userid).Requestid)).Confirmationnumber)*@                            <p class="small text-secondary mt-2">Check here for any files that you or the doctors of your subrequests requestors have attached for you to review.</p>                            <form method="post" class="d-flex" enctype="multipart/form-data">                                <input class="form-control " type="file" id="formFile" name="file">                                <button type="submit" for="formFile" class="input-group-text bg-primary text-white" multiple>                                    <i class="bi bi-cloud-arrow-up "></i>&nbsp;Upload                                </button>                            </form>                                                    </div>                        <div class="container mt-3 d-flex justify-content-between">                            <div class="text-black"><h5 class="text-black">Document</h5></div>                            <div></div>                            <button class="btn btn-outline-info btn-large" id="downloadSelected" onclick="downloadSelectedFiles()">                                Download All                            </button>                        </div>                    </div>                </div>            </div>        </div>        <table class="table">        <thead>            <tr>                <th scope="col">                    <input type="checkbox" id="selectAll" class="doc-checkbox" />                </th>                <th></th>                <th scope="col">Uploader</th>                <th scope="col">Upload Date <i class="bi bi-arrow-up"></i></th>                <th scope="col">Actions</th>            </tr>        </thead>        <tbody>            @foreach (var items in Model.models)            {                <tr>                    <td>                        <input type="checkbox" id="fileUpload" name="selectedFiles" value="@items.uploader">                    </td>                    <td class="text-dark"><i class="bi bi-file-earmark-minus-fill"></i>  &nbsp;@items.uploader</td>                    <td> @_httpContextAccessor.HttpContext.Session.GetString("PatientName")</td>                    <td class="text-dark">@items.uploaddate.ToString().Split(' ')[0]</td>                    <td>                        <button type="button" class="btn btn-outline-info"><a href="~/Files/@items.uploader" class="text-decoration-none ElementColor " download /><i class="fa fa-cloud-arrow-up"></i></button>                    </td>                </tr>            }        </tbody>    </table></div><div id="Profile" class="tab-contents">    @await Html.PartialAsync("Profile")</div><script src="~/lib/jquery/dist/jquery.min.js"></script><script>    $('#selectAll').click(function (e) {        var table = $(e.target).closest('table');        $('td input:checkbox', table).prop('checked', this.checked);    });    function DownloadAll() {        var allcheckbox = document.getElementsByClassName('doc-checkbox');        var alllinks = document.getElementsByClassName('download-link');        for (var i = 0; i < allcheckbox.length; i++) {            if (allcheckbox[i].checked) {                console.log(alllinks[i]);                alllinks[i].click();            }        }    }    function downloadSelectedFiles() {        var selectedFiles = [];        var checkboxes = document.getElementsByName('selectedFiles');        for (var i = 0; i < checkboxes.length; i++) {            if (checkboxes[i].checked) {                selectedFiles.push(checkboxes[i].value);            }        }        // If no files are selected, return                   if (selectedFiles.length === 0) {                swal({                    title: "Error",                    text: "Please select at least one file",                    icon: "error",                    confirmButtonText: "OK"                });                return;            }                   // Construct URLs for all selected files and initiate download        for (var j = 0; j < selectedFiles.length; j++) {            var fileUrl = '/Files/' + selectedFiles[j];            var link = document.createElement('a');            link.href = fileUrl;            link.setAttribute('download', ''); // This attribute triggers the download            link.click(); // Simulate a click event to initiate the download        }    }</script><script>    function validateData() {        if ($('[type="checkbox"]').is(':checked')) {            sweetAlert("Congratulations!!", "Your file is downloaded", "success");            return true;        }        else {            sweetAlert("Selection Was Empty!!", "Please select at least one", "error");            return false;        }    }</script><script>    const phoneInputField = document.querySelectorAll("input[type='tel']");    for (var i = 0; i < phoneInputField.length; i++) {        const phoneInput = window.intlTelInput(phoneInputField[i], {            utilsScript:                "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",        });    }</script><script>    var tablinks = document.getElementsByClassName("tab-links");    var tabcontents = document.getElementsByClassName("tab-contents");    function opentab(tabname) {        for (tablink of tablinks) {            tablink.classList.remove("active-link");        }        for (tabcontent of tabcontents) {            tabcontent.classList.remove("active-tab");        }        event.currentTarget.classList.add("active-link");        document.getElementById(tabname).classList.add("active-tab");    }</script><script>    $("#toggleAll").click(function () {        $("#chex :checkbox").attr("checked", $(this).attr("checked"));    });    $(document).ready(function () {        $("#ckbCheckAll").click(function () {            $(".checkBoxClass").prop('checked', $(this).prop('checked'));        });        $(".checkBoxClass").change(function () {            if (!$(this).prop("checked")) {                $("#ckbCheckAll").prop("checked", false);            }        })</script>